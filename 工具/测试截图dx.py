import uuid

import dxcam
from PIL import Image
from pynput.keyboard import Listener, Key


def cut_zidan():

    for i in range(1):
        frame = camera.get_latest_frame()
        print(frame)
        print(type(frame))
        name = uuid.uuid4().hex
        Image.fromarray(frame).save(f'{name}.png')
        print(f"save to :{name}")



def keyboard_press(key):
    if hasattr(key, 'vk') and key.vk == 97:  # 小键盘1
        cut_zidan()


def keyboard_release(key):
    if key == Key.esc:  # 如果按下了ESC键,则结束监听
        return False

camera = dxcam.create()
box = (1257, 1312, 1302, 1359)
camera.start(region=box)
def main():

    print("按下1截取子弹数量的位置,按下ESC退出程序")
    with Listener(on_press=keyboard_press,
                  on_release=keyboard_release) as listener:
        listener.join()


if __name__ == '__main__':
    main()
"""
E:\Python3.7.6\python.exe D:\GitCode\pubg-press-gun\工具\测试截图dx.py 
按下1截取子弹数量的位置,按下ESC退出程序
[[[ 12  11  10]
  [ 15  14  12]
  [ 18  16  14]
  ...
  [108 104  96]
  [105 101  94]
  [103  98  90]]

 [[ 12  10   9]
  [ 14  13  11]
  [ 18  16  14]
  ...
  [109 104  98]
  [107 102  95]
  [104  99  91]]

 [[ 11  10   8]
  [ 14  12  10]
  [ 17  15  13]
  ...
  [109 105  98]
  [107 102  95]
  [104  98  91]]

 ...

 [[ 60  55  49]
  [189 188 187]
  [242 242 242]
  ...
  [195 195 193]
  [ 59  55  49]
  [ 76  71  64]]

 [[ 62  58  52]
  [167 166 163]
  [242 242 242]
  ...
  [170 169 167]
  [ 62  58  53]
  [ 77  72  65]]

 [[ 70  65  58]
  [100  97  93]
  [242 242 242]
  ...
  [102 100  96]
  [ 70  65  59]
  [ 79  74  66]]]
<class 'numpy.ndarray'>
save to :c937e2d99554487ca50362e5b9d6817a
Screen Capture FPS: 70
[[[35 32 28]
  [35 32 27]
  [35 32 27]
  ...
  [48 44 39]
  [44 41 36]
  [42 38 34]]

 [[34 31 27]
  [33 31 27]
  [33 31 26]
  ...
  [57 53 48]
  [55 51 46]
  [52 48 44]]

 [[33 30 26]
  [32 29 26]
  [31 29 25]
  ...
  [68 64 58]
  [66 62 57]
  [64 60 55]]

 ...

 [[33 30 26]
  [31 29 25]
  [31 29 24]
  ...
  [20 18 16]
  [21 20 17]
  [22 20 18]]

 [[38 36 31]
  [38 36 31]
  [37 35 30]
  ...
  [28 25 22]
  [29 27 23]
  [30 27 24]]

 [[44 41 35]
  [44 41 35]
  [44 40 35]
  ...
  [36 33 29]
  [36 34 29]
  [38 35 30]]]
<class 'numpy.ndarray'>
save to :ad929d9b9055440e8ae2cf6edabcf939
Screen Capture FPS: 82
[[[35 33 28]
  [35 33 28]
  [35 32 28]
  ...
  [33 30 26]
  [32 29 25]
  [31 28 25]]

 [[35 32 28]
  [35 32 28]
  [35 32 28]
  ...
  [38 35 31]
  [36 34 30]
  [35 32 29]]

 [[35 32 27]
  [35 32 27]
  [35 32 27]
  ...
  [47 44 39]
  [44 41 36]
  [42 38 35]]

 ...

 [[21 20 17]
  [20 18 16]
  [19 18 15]
  ...
  [10  8  7]
  [10  9  8]
  [10 10  8]]

 [[28 26 22]
  [27 25 21]
  [26 24 20]
  ...
  [14 13 11]
  [15 13 12]
  [16 14 12]]

 [[34 32 27]
  [34 31 27]
  [33 31 26]
  ...
  [21 19 16]
  [21 20 17]
  [22 20 18]]]
<class 'numpy.ndarray'>
save to :35d16f3ca3d7412d8a07a3213d8776a1
Screen Capture FPS: 80
[[[  2   1   1]
  [  2   1   1]
  [  3   2   1]
  ...
  [ 20  18  16]
  [ 18  16  14]
  [ 16  14  12]]

 [[  2   1   1]
  [  2   1   1]
  [  3   2   1]
  ...
  [ 18  16  15]
  [ 16  14  13]
  [ 14  13  11]]

 [[  1   1   1]
  [  2   1   1]
  [  2   2   1]
  ...
  [ 18  16  14]
  [ 16  14  12]
  [ 14  12  10]]

 ...

 [[ 98  94  86]
  [ 99  94  86]
  [ 99  94  87]
  ...
  [105 101  93]
  [104 100  92]
  [103  98  90]]

 [[103  98  90]
  [103  99  91]
  [104  99  92]
  ...
  [109 104  96]
  [107 102  96]
  [105 101  94]]

 [[104 100  93]
  [105 101  93]
  [105 101  94]
  ...
  [108 104  97]
  [107 102  96]
  [105 101  95]]]
<class 'numpy.ndarray'>
save to :c95f2b84194842d69e7923abf1a16e2e
Screen Capture FPS: 80
[[[ 94  89  76]
  [ 94  89  76]
  [ 94  89  76]
  ...
  [ 90  85  73]
  [ 91  85  73]
  [ 90  85  73]]

 [[ 94  89  76]
  [ 94  89  76]
  [ 94  89  76]
  ...
  [ 90  85  73]
  [ 91  85  73]
  [ 90  85  73]]

 [[ 94  89  76]
  [ 94  89  76]
  [ 95  89  76]
  ...
  [ 91  85  73]
  [ 91  85  73]
  [ 91  85  73]]

 ...

 [[ 97  91  79]
  [ 98  92  80]
  [ 98  92  80]
  ...
  [118 114 107]
  [118 115 107]
  [119 115 107]]

 [[ 98  93  81]
  [ 99  93  82]
  [100  94  83]
  ...
  [121 117 109]
  [121 117 110]
  [121 117 111]]

 [[101  96  85]
  [102  96  85]
  [102  97  86]
  ...
  [122 118 111]
  [122 118 112]
  [122 119 112]]]
<class 'numpy.ndarray'>
save to :d160158d1ac34f4781dbbc9bf22ec0a1
Screen Capture FPS: 79
[[[ 38  31  27]
  [ 36  29  25]
  [ 33  27  23]
  ...
  [ 94  89  76]
  [ 94  89  76]
  [ 94  88  76]]

 [[ 36  29  25]
  [ 33  27  23]
  [ 31  25  21]
  ...
  [ 94  88  76]
  [ 93  88  76]
  [ 93  87  76]]

 [[ 33  27  23]
  [ 31  25  21]
  [ 29  23  20]
  ...
  [ 93  87  76]
  [ 93  87  75]
  [ 93  87  75]]

 ...

 [[ 91  72  57]
  [ 89  69  55]
  [ 85  67  52]
  ...
  [ 65  62  55]
  [ 97  92  82]
  [101  96  87]]

 [[ 93  72  57]
  [ 90  71  56]
  [ 89  68  53]
  ...
  [ 67  63  57]
  [100  95  87]
  [105 100  92]]

 [[ 94  74  59]
  [ 92  72  57]
  [ 90  70  55]
  ...
  [ 69  65  60]
  [104  99  91]
  [109 105  96]]]
<class 'numpy.ndarray'>
save to :dd9827e37f5748bfb9a9c12d32076c1f
Screen Capture FPS: 82

进程已结束,退出代码0


"""